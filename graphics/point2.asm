.model small

.data
adapter dw 12h
bitmask db 8
x dw 320
y dw 200
color db 0110

.code
start:
; Init Adapter

mov ax, @data       ; ????????? ???????? ??????
mov ds, ax      ; ????? ??????? ??
mov ax, adapter
int 10h                 ; ?????????? BIOS

; Init offset

mov ax, 0A000h  ; ????? ???????????
mov es, ax      ; ????????????? ?????????? ???????

; ?????????? ????????? ? ????????

mov ax, y       ; select y
mov dx, 80              ; 640 / 80 = 8 -> ???????? ? ?????
mul dx          ; ax = y * 80 -> ???????? ? ?????? ?? y

mov bx, x
mov cl, bl
shr bx, 1               ; x // 8
shr bx, 1
shr bx, 1

add bx, ax      ; x + y => ????????

; ?????? ??? ???

and cl, 07h     ; bitmask mask
xor cl, 07h
mov ah, 01h
shl ah, cl
mov bitmask, ah

;---????????? ????
mov dx, 3CEh        ;????????? ?? ???????? ???????
mov al, 8           ;????? ????????
out dx, al          ;???????? ???
inc dx              ;????????? ?? ??????? ??????
mov al, bitmask         ;?????
out dx, al          ;???????? ??????
   
;---????????? ???????? ????? ????? ??? ?????
mov dx, 3C4h        ;????????? ?? ???????? ???????
mov al, 2           ;?????? ???????? ????? ?????
out dx, al          ;????????? ??????
inc dx              ;????????? ?? ??????? ??????
mov al, color       ;??? ?????
out dx, al          ;???????? ??? ?????
   
;---?????? ?????
mov al, 0FFh        ;????? ???????? ? ????????????? 7 ?????
mov es:[bx], al     ;??????? ?????

; ??????????

xor ax, ax      ;???????? ??????? ???????
int 16h

mov ax, 4C00h           ;????? ?? ??????? ? ?????????
int 21h         ;? ?????????? ?????
end start